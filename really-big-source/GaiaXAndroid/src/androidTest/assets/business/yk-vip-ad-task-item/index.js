//------ts start------
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
//------ts end------

Component({state:{},onReady:function(){console.log("onReady onReady"),this.doTask()},onReuse:function(){console.log("onReuse onReuse"),this.doTask()},doTask:function(){var a=this;this.doUCExposure(this.data);var t=this.getElementById("yk-vip-ad-task-item-button"),o=this.getElementById("yk-vip-ad-task-item-feedback"),e=!1,n=!1;this.addEventListener("ItemRefresh",(function(t){0==n&&(n=!0,1==t.data&&(a.refreshCard(),a.refreshComponent()),n=!1)})),o&&o.addEventListener("click",(function(t){if(0==e){var o=a.data;e=!0,2==o.data.taskFinishStatus?(gaiax.showToast({title:"已完成无需反馈",duration:2}),e=!1):gaiax.showCustomDialog({identifierId:"yk-vip-feedback-dialog",templateId:"yk-vip-feedback-dialog",bizId:"yk-vip",templateData:{data:o}},(function(){e=!1}))}})),t?(t.removeEventListener("click"),t.addEventListener("click",(function(t){var o=a.data,e=o.data.actId,n=o.data.taskId,i=o.data.asac;if(a.domarkTask(e,n,i),console.log("click-reuse"),console.log("改变按钮文字"),"刷新查看"==o.data.buttonText||"登录查看"==o.data.buttonText)gaiax.checkSession()?(console.log("已登录"),a.refreshPage()):(console.log("未登录"),gaiax.login().then((function(){a.refreshPage()})));else if(o.data.subTaskType&&"4"==o.data.subTaskType){if("1"==o.data.taskFinishStatus)if(gaiax.checkSession()){if(o.data.curl){var s=JSON.parse(o.data.curl);s&&s.forEach((function(a){gaiax.https(a).then((function(a){}))}))}"iOS"==gaiax.getSystemInfo().platform&&o.data.landing_url&&gaiax.https(o.data.landing_url).then((function(a){})).catch((function(a){console.log(a)})),VIP.downloadAdTask({adType:"adVIP",taskId:o.data.taskId,landingUrl:o.data.landing_url,appstoreId:o.data.appstoreId})}else gaiax.login().then((function(){a.refreshPage()})),o.data.buttonText="登录查看",a.setData(o)}else 1==o.data.mainTaskType?"1"==o.data.taskFinishStatus&&(o.data.taskType&&"1"==o.data.taskType?VIP.downloadAdTask({adType:"adVIP",taskId:o.data.taskId,landingUrl:o.data.landing_url,appstoreId:o.data.appstoreId}):gaiax.openAction(o.data.action),gaiax.checkSession()?o.data.buttonText="刷新查看":o.data.buttonText="登录查看",a.setData(o)):2==o.data.mainTaskType&&"1"==o.data.taskFinishStatus&&(gaiax.checkSession()?gaiax.getUserInfo().then((function(t){t.bindTaobao?a.doMtopWork(e,n,i):gaiax.bindTaobao().then((function(){a.doMtopWork(e,n,i)})).catch((function(){console.log("绑定失败")}))})):gaiax.login().then((function(){gaiax.getUserInfo().then((function(t){t.bindTaobao?a.doMtopWork(e,n,i):gaiax.bindTaobao().then((function(){a.doMtopWork(e,n,i)})).catch((function(){console.log("绑定失败")}))}))})).catch((function(a){console.log("登录失败")})))}),{cover:!0})):console.log("title not exist")},onHide:function(){console.log("onhide")},onDestroy:function(){console.log("ondestory")},domarkTask:function(a,t,o){gaiax.mtop("mtop.youku.ykinfinite.taskdeliveryservice.markTask",{method:"POST",body:{api_version:"1.0",actId:a,taskId:t,appPackageKey:"com.youku.Youku",markType:1,asac:o}}).then((function(a){console.log("success")})).catch((function(a){console.log("error")}))},doMtopWork:function(a,t,o){var e=this;gaiax.mtop("mtop.youku.ykinfinite.taskdeliveryservice.finishTask",{method:"POST",body:{api_version:"1.0",actId:a,taskId:t,appPackageKey:"com.youku.Youku",asac:o}}).then((function(a){setTimeout((function(){e.refreshPage()}),500)})).catch((function(a){if(a.ret&&a.ret.length>0){var t=a.ret[0];console.log(t);var o=t.split("::");if(console.log(o),o.length>1){var e=o[0],n=o[1];console.log(e),gaiax.showToast({title:n})}else gaiax.showToast({title:"太火爆啦～请稍后重试～",duration:2})}else if(a.message){var i=a.message;if(console.log(i),i){var s=i.indexOf("msg=");if(-1!=s){s+=4;var d=i.indexOf("subMsg")-2;n=i.slice(s,d);gaiax.showToast({title:n,duration:2})}}}else gaiax.showToast({title:"太火爆啦～请稍后重试～",duration:2})}))},doUCExposure:function(a){if(a.data.subTaskType&&"4"==a.data.subTaskType&&a.data.vurl){console.log("曝光执行1");var t=JSON.parse(a.data.vurl);console.log(t),t&&t.forEach((function(a){console.log("曝光执行"+a),gaiax.https(a,{}).then((function(a){console.log("曝光成功")})).catch((function(a){console.log(a),console.log("曝光失败")}))}))}}});