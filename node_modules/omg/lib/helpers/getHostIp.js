"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getHostIp;

var _execa = _interopRequireDefault(require("execa"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function getHostIp() {
  const hostDomain = 'host.docker.internal';
  const {
    exitCode,
    stdout
  } = await (0, _execa.default)('ip', ['-4', 'addr', 'show', 'docker0']);

  if (exitCode === 0) {
    const outputMatch = stdout.match(/inet ([\d.]+)/);

    if (outputMatch) {
      return `${hostDomain}:${outputMatch[1]}`;
    }
  }

  return null;
}